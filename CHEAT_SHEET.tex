\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{multicol}
\usepackage{geometry}
\usepackage{array}
\usepackage{booktabs}
\usepackage{fancyhdr}
\usepackage{enumitem}

% Minimal margins for maximum content
\geometry{top=0.2in,left=0.15in,right=0.15in,bottom=0.2in}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{\small\textbf{zzvim-R Quick Reference}}
\renewcommand{\headrulewidth}{0.1pt}

% Ultra-compact spacing
\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt}
\setlength{\columnsep}{0.1in}

% Custom commands for ultra-compact tables
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\setlist[itemize]{nosep,leftmargin=8pt,topsep=0pt,partopsep=0pt}

\begin{document}

\begin{multicols}{3}
\footnotesize

\textbf{Key Mappings}

\textbf{Terminal}\\
\begin{tabular}{@{}L{2.44cm}L{3.51cm}@{}}
\texttt{<localleader> r} & Create terminal \\
\texttt{<localleader> w} & Vertical split \\
\texttt{<localleader> W} & Horizontal split \\
\texttt{<localleader> q} & Quit session \\
\texttt{<localleader> c} & Interrupt \\
\end{tabular}

\vspace{3pt}
\textbf{Code}\\
\begin{tabular}{@{}L{2.44cm}L{3.51cm}@{}}
\texttt{CR} & Smart submit \\
\texttt{<localleader> sf} & Force function \\
\texttt{<localleader> sl} & Force line \\
\texttt{<localleader> sa} & Smart auto \\
\end{tabular}

\vspace{3pt}
\textbf{R Markdown}\\
\begin{tabular}{@{}L{2.44cm}L{3.51cm}@{}}
\texttt{<localleader> j} & Next chunk \\
\texttt{<localleader> k} & Previous chunk \\
\texttt{<localleader> l} & Execute chunk \\
\texttt{<localleader> t} & All previous \\
\end{tabular}

\vspace{3pt}
\textbf{Inspect}\\
\begin{tabular}{@{}L{2.44cm}L{3.51cm}@{}}
\texttt{<localleader> h} & head() \\
\texttt{<localleader> u} & tail() \\
\texttt{<localleader> s} & str() \\
\texttt{<localleader> d} & dim() \\
\texttt{<localleader> p} & print() \\
\texttt{<localleader> n} & names() \\
\texttt{<localleader> f} & length() \\
\texttt{<localleader> g} & glimpse() \\
\texttt{<localleader> b} & dt() \\
\texttt{<localleader> y} & help() \\
\end{tabular}

\vspace{3pt}
\textbf{Workspace}\\
\begin{tabular}{@{}L{2.44cm}L{3.51cm}@{}}
\texttt{<localleader> '} & Overview \\
\texttt{<localleader> i} & Inspect obj \\
\texttt{<localleader> o} & Insert pipe \\
\end{tabular}

\columnbreak

\textbf{Ex Commands}

\textbf{Core}\\
\begin{tabular}{@{}L{2.93cm}L{2.54cm}@{}}
\texttt{:ROpenTerminal} & Create term \\
\texttt{:RSendLine} & Send line \\
\texttt{:RSendSelection} & Send select \\
\texttt{:RSendFunction} & Send func \\
\texttt{:RSendSmart} & Smart \\
\texttt{:RSend \{code\}} & Execute \\
\end{tabular}

\vspace{3pt}
\textbf{Chunks}\\
\begin{tabular}{@{}L{2.93cm}L{2.54cm}@{}}
\texttt{:RNextChunk} & Next \\
\texttt{:RPrevChunk} & Previous \\
\texttt{:RSendChunk} & Execute \\
\texttt{:RSendPreviousChunks} & All prev \\
\end{tabular}

\vspace{3pt}
\textbf{Analysis}\\
\begin{tabular}{@{}L{2.93cm}L{2.54cm}@{}}
\texttt{:RHead [obj]} & head() \\
\texttt{:RTail [obj]} & tail() \\
\texttt{:RStr [obj]} & str() \\
\texttt{:RDim [obj]} & dim() \\
\texttt{:RPrint [obj]} & print() \\
\texttt{:RNames [obj]} & names() \\
\texttt{:RLength [obj]} & length() \\
\texttt{:RGlimpse [obj]} & glimpse() \\
\texttt{:RSummary [obj]} & summary() \\
\texttt{:RHelp [topic]} & help() \\
\end{tabular}

\vspace{3pt}
\textbf{Session}\\
\begin{tabular}{@{}L{2.93cm}L{2.54cm}@{}}
\texttt{:RQuit} & Quit R \\
\texttt{:RInterrupt} & Interrupt \\
\texttt{:RGetwd} & Show dir \\
\texttt{:RSetwd [dir]} & Set dir \\
\texttt{:RLs} & List objs \\
\texttt{:RRm} & Clear \\
\end{tabular}

\vspace{3pt}
\textbf{Packages}\\
\begin{tabular}{@{}L{2.93cm}L{2.54cm}@{}}
\texttt{:RLibrary \{pkg\}} & Load pkg \\
\texttt{:RInstall \{pkg\}} & Install \\
\texttt{:RSource \{file\}} & Source \\
\texttt{:RInstallDplyr} & dplyr \\
\end{tabular}

\textbf{Data/Terminal}\\
\begin{tabular}{@{}L{2.93cm}L{2.54cm}@{}}
\texttt{:RLoad \{file\}} & Load RDS \\
\texttt{:RSave \{obj\} \{file\}} & Save RDS \\
\texttt{:RShowTerminal} & Show term \\
\texttt{:RListTerminals} & List terms \\
\texttt{:RSwitchToTerminal} & Jump term \\
\texttt{:ROpenSplit [type]} & Split term \\
\texttt{:RWorkspace} & Overview \\
\texttt{:RInspect [obj]} & Inspect \\
\end{tabular}

\vspace{4pt}
\textbf{Config Variables}\\
\begin{tabular}{@{}L{3.9cm}L{1.56cm}@{}}
\texttt{g:zzvim\_r\_disable\_mappings} & 0 \\
\texttt{g:zzvim\_r\_terminal\_width} & 100 \\
\texttt{g:zzvim\_r\_terminal\_height} & 15 \\
\texttt{g:zzvim\_r\_command} & R \\
\texttt{g:zzvim\_r\_chunk\_start} & \^{}\`{}\`{}\`{}\{ \\
\texttt{g:zzvim\_r\_chunk\_end} & \^{}\`{}\`{}\`{} \\
\end{tabular}

\columnbreak

\textbf{Smart Detection}
\begin{itemize}
\item \textbf{Functions}: \texttt{function()} → complete
\item \textbf{Control}: \texttt{if/for/while} → block  
\item \textbf{Multi-line}: \texttt{()} \texttt{[]} → balanced
\item \textbf{Pipes}: \texttt{\%>\%} \texttt{|>} → chain
\item \textbf{Lines}: assignments → current
\item \textbf{Debug}: inside functions → single
\end{itemize}

\vspace{4pt}
\textbf{Tips}
\begin{itemize}
\item LocalLeader = space key (shown as \texttt{<localleader>}), Leader = \texttt{,}
\item Each buffer = isolated R session
\item Uses \texttt{.zzvim\_r\_temp.R} for clean output
\item Visual mode: \texttt{CR} sends selection
\item Object inspection: cursor word or argument
\item Terminal per file for workflow isolation
\end{itemize}

\end{multicols}

\end{document}